;/*FB_PKG_DELIM*/

__d("DGWSignalingListener",["FBLogger","ZenonDGWStreamController","ZenonMWThriftMessageDebugLogger","ZenonMWThriftMessageReliabilityLogger","ZenonMWThriftMessageSerializer","ZenonMWThriftMessageTranslator","getErrorSafe","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){this.$1=c("ZenonDGWStreamController").getControllerInstance(),c("promiseDone")(this.$1.establishAndGetStream())}var b=a.prototype;b.setLoggingEventHandler=function(a){this.$2=a};b.subscribe=function(a,b){var e=this;this.$1.setOnDataReceivedCallback(function(f){try{f=d("ZenonMWThriftMessageSerializer").deserializeMWThriftMessage(f,!0);c("ZenonMWThriftMessageDebugLogger").logMWThriftMessage("RECEIVED","DGW Thrift",f);d("ZenonMWThriftMessageReliabilityLogger").logReceivedMessage(f);e.$2&&e.$2({mwThriftMessage:f,name:"mwThriftMessageRecv"});var g=d("ZenonMWThriftMessageTranslator").toSignalingMessage(f);d("ZenonMWThriftMessageReliabilityLogger").logMessageAfterTranslation(f);if(g==null)return;b&&e.$3(f,g,b);a(g);d("ZenonMWThriftMessageReliabilityLogger").logProcessingMessage(f)}catch(a){c("FBLogger")("rpweb").catching(c("getErrorSafe")(a)).warn("Error receiving DGW message")}})};b.unsubscribe=function(){this.$1.closeStream()};b.$3=function(a,b,d){try{d(a,b)}catch(a){c("FBLogger")("rtweb").catching(c("getErrorSafe")(a)).mustfix("Signaling messages should be json parsable")}};return a}();g["default"]=a}),98);
__d("ZenonDGWTransportChannelStatus",["EventEmitter","ZenonDGWStreamController"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){function b(){var b;b=a.call(this)||this;b.$ZenonDGWTransportChannelStatus$p_1=c("ZenonDGWStreamController").getControllerInstance();b.$ZenonDGWTransportChannelStatus$p_1.addListener("connectionStateEvent",function(a){b.emit("connectionStateEvent",a)});return b}babelHelpers.inheritsLoose(b,a);var d=b.prototype;d.getConnectionState=function(){return this.$ZenonDGWTransportChannelStatus$p_1.getConnectionState()};d.getTransportName=function(){return"dgw"};return b}(c("EventEmitter"));g["default"]=a}),98);